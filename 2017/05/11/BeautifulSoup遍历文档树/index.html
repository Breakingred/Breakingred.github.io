<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Echo"><title>BeautifulSoup遍历文档树 · Echo</title><meta name="description" content="我们已经了解了HTML/XML 的树状结构，以及各个节点的类型及其属性、方法。简单说，遍历文档树指怎样从文档中的一个节点跳转到/找到另一节点。
本文依然使用以下文档作说明：
12345678910111213141516html_doc = &amp;quot;&amp;quot;&amp;quot;&amp;lt;html&amp;gt"><meta name="keywords" content="Echo"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h5 title=""><a href="/">Echo</a></h5></div></div><ul class="social-links"><li><a href="https://twitter.com/111111111111111111111111111111111111111None"><i class="fa fa-twitter"></i></a></li><li><a href="http://instagram.com/111111111111111111111111111111111111111None"><i class="fa fa-instagram"></i></a></li><li><a href="/111111111111111111111111111111111111111None"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/111111111111111111111111111111111111111None"><i class="fa fa-weibo"></i></a></li></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="http://wx1.sinaimg.cn/large/7f0488e9ly1fbwhwy85xmj20h80gagoe.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>BeautifulSoup遍历文档树</a></h3></div><div class="post-content"><p>我们已经了解了HTML/XML 的<strong>树状结构</strong>，以及各个<strong>节点</strong>的类型及其属性、方法。简单说，遍历文档树指怎样<strong>从文档中的一个节点跳转到/找到另一节点</strong>。<br></p>
<p>本文依然使用以下文档作说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">html_doc = &quot;&quot;&quot;</div><div class="line">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;</div><div class="line"></div><div class="line">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</div><div class="line">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</div><div class="line">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</div><div class="line">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</div><div class="line">and they lived at the bottom of a well.&lt;/p&gt;</div><div class="line"></div><div class="line">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</div><div class="line">&quot;&quot;&quot;</div><div class="line"></div><div class="line">from bs4 import BeautifulSoup</div><div class="line">soup = BeautifulSoup(html_doc, &apos;lxml&apos;)</div></pre></td></tr></table></figure>
<p><br></p>
<h3 id="子节点"><a href="#子节点" class="headerlink" title="子节点"></a>子节点</h3><blockquote>
<p>一个Tag可能包含多个字符串或其它的Tag,这些都是这个Tag的子节点.Beautiful Soup提供了许多操作和遍历子节点的属性.</p>
<p>注意: Beautiful Soup中字符串节点不支持这些属性,因为<strong>字符串没有子节点</strong></p>
</blockquote>
<p><br></p>
<h4 id="find-all-‘’-查找所有"><a href="#find-all-‘’-查找所有" class="headerlink" title="- .find_all(‘’) 查找所有"></a>- .find_all(‘’) 查找所有</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">soup.body.a</div><div class="line"># 获取第一个&lt;body&gt;中的第一个&lt;a&gt;</div><div class="line">soup.find_all(&apos;a&apos;)</div><div class="line"># 获取所有的&lt;a&gt;</div></pre></td></tr></table></figure>
<h4 id="contents-以列表输出当前tag-的子节点"><a href="#contents-以列表输出当前tag-的子节点" class="headerlink" title="- .contents - 以列表输出当前tag 的子节点"></a>- .contents - 以列表输出当前tag 的子节点</h4><h4 id="children-对tag-的子节点进行循环"><a href="#children-对tag-的子节点进行循环" class="headerlink" title="- .children - 对tag 的子节点进行循环"></a>- .children - 对tag 的子节点进行循环</h4><h4 id="descendants-对tag-的所有子孙节点进行递归循环"><a href="#descendants-对tag-的所有子孙节点进行递归循环" class="headerlink" title="- .descendants - 对tag 的所有子孙节点进行递归循环"></a>- .descendants - 对tag 的所有子孙节点进行递归循环</h4><h4 id="string-输出tag-包含的字符串"><a href="#string-输出tag-包含的字符串" class="headerlink" title="- .string 输出tag 包含的字符串"></a>- .string 输出tag 包含的字符串</h4><ul>
<li>如果tag 只有一个 <code>NavigableString</code> 类型子节点,那么这个tag可以使用 <code>.string</code> 得到子节点</li>
<li>如果tag 有多个 <code>NavigableString</code> 类型子节点，.string 会返回<code>None</code></li>
</ul>
<h4 id="strings-循环输出tag-包含的所有字符串"><a href="#strings-循环输出tag-包含的所有字符串" class="headerlink" title="- .strings 循环输出tag 包含的所有字符串"></a>- .strings 循环输出tag 包含的所有字符串</h4><h4 id="stripped-strings-去除-strings-中的多余空白内容"><a href="#stripped-strings-去除-strings-中的多余空白内容" class="headerlink" title="- stripped_strings 去除.strings 中的多余空白内容"></a>- stripped_strings 去除.strings 中的多余空白内容</h4><p><br></p>
<h3 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h3><h4 id="parent-获取某个元素的父节点"><a href="#parent-获取某个元素的父节点" class="headerlink" title="- .parent 获取某个元素的父节点"></a>- .parent 获取某个元素的父节点</h4><h4 id="parents-递归得到元素的所有父辈节点"><a href="#parents-递归得到元素的所有父辈节点" class="headerlink" title="- .parents 递归得到元素的所有父辈节点"></a>- .parents 递归得到元素的所有父辈节点</h4><p><br></p>
<h3 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h3><h4 id="next-sibling-previous-sibling-查询下-上一个兄弟节点"><a href="#next-sibling-previous-sibling-查询下-上一个兄弟节点" class="headerlink" title="- .next_sibling / .previous_sibling 查询下/上一个兄弟节点"></a>- .next_sibling / .previous_sibling 查询下/上一个兄弟节点</h4><h4 id="next-siblings-previous-siblings-对当前节点的兄弟节点迭代输出"><a href="#next-siblings-previous-siblings-对当前节点的兄弟节点迭代输出" class="headerlink" title="- .next_siblings / .previous_siblings 对当前节点的兄弟节点迭代输出"></a>- .next_siblings / .previous_siblings 对当前节点的兄弟节点迭代输出</h4><p><br></p>
<h3 id="回退和前进"><a href="#回退和前进" class="headerlink" title="回退和前进"></a>回退和前进</h3><h4 id="next-element-previous-element-解析过程中下-上一个被解析的对象-字符串或tag"><a href="#next-element-previous-element-解析过程中下-上一个被解析的对象-字符串或tag" class="headerlink" title="- .next_element / .previous_element 解析过程中下/上一个被解析的对象(字符串或tag)"></a>- .next_element / .previous_element 解析过程中下/上一个被解析的对象(字符串或tag)</h4><h4 id="next-elements-previous-elements-生成迭代器向前或向后访问文档的解析内容"><a href="#next-elements-previous-elements-生成迭代器向前或向后访问文档的解析内容" class="headerlink" title="- .next_elements / .previous_elements 生成迭代器向前或向后访问文档的解析内容"></a>- .next_elements / .previous_elements 生成迭代器向前或向后访问文档的解析内容</h4></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-11</span><i class="fa fa-tag"></i><a href="/tags/爬虫/" title="爬虫" class="tag">爬虫 </a></div></div></div></div><div class="share"><div class="evernote"> <a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"> <a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"> <a href="http://twitter.com/home?status=,http://yoursite.com/2017/05/11/BeautifulSoup遍历文档树/,Echo,BeautifulSoup遍历文档树,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2017/05/09/web-api/" title="(译) Web API for non-programmers" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2017/05/11/BeautifulSoup搜索文档树/" title="BeautifulSoup搜索文档树" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>