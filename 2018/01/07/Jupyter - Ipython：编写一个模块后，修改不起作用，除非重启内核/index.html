<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Echo"><title> · Echo</title><meta name="description" content="Jupyter / Ipython：编写一个模块后，修改不起作用，除非重启内核 Jupyter / IPython: After editing a module, changes are not effective without kernel restart Jonathan March
Nov"><meta name="keywords" content="Echo"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h5 title=""><a href="/">Echo</a></h5></div></div><ul class="social-links"><li><a href="https://twitter.com/111111111111111111111111111111111111111None"><i class="fa fa-twitter"></i></a></li><li><a href="http://instagram.com/111111111111111111111111111111111111111None"><i class="fa fa-instagram"></i></a></li><li><a href="/111111111111111111111111111111111111111None"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/111111111111111111111111111111111111111None"><i class="fa fa-weibo"></i></a></li></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="http://wx1.sinaimg.cn/large/7f0488e9ly1fbwhwy85xmj20h80gagoe.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a></a></h3></div><div class="post-content"><h1 id="Jupyter-Ipython：编写一个模块后，修改不起作用，除非重启内核"><a href="#Jupyter-Ipython：编写一个模块后，修改不起作用，除非重启内核" class="headerlink" title="Jupyter / Ipython：编写一个模块后，修改不起作用，除非重启内核"></a>Jupyter / Ipython：编写一个模块后，修改不起作用，除非重启内核</h1><p><a href="https://support.enthought.com/hc/en-us/articles/204469240-Jupyter-IPython-After-editing-a-module-changes-are-not-effective-without-kernel-restart" target="_blank" rel="external"> Jupyter / IPython: After editing a module, changes are not effective without kernel restart </a><br><em>Jonathan March
</em>November 20, 2017 02:37<br>A powerful feature of Jupyter / IPython (indeed, of Python itself) is that you can interact with your data from the (I)Python command line. In order to provide this functionality, the modules which hold your data remain alive between invocations. Therefore once a module is imported, it stays imported, and re-importing it has no effect at all.<br>Jupyter / IPython 使得我们可以用一种交互模式操纵数据，为了实现这一功能，模块导入后将持续保持可用，重复导入没有影响</p>
<p>However this great feature can have puzzling consequences, especially to programmers who are more used to compiled languages with make-style dependency change detection. In particular, if you change a python module which has already been imported within ipython, and then re-import that module (e.g. by using ipython to run a program which uses it), python will think “I’ve already imported this module, no need to read that file again”, so your changes will not be effective. (Note that this does not apply to your main program file, which IPython runs directly, rather than importing, so that changes are always effective once they are saved.)<br>这一功能有时令人困惑，有时你修改了已导入的模块，并且重新导入了这一模块（通过重新运行主程序的方法），Python会认为你已经导入了这个模块，没有必要重新再导入一遍了，所以你对模块的修改并不会起效（但是如果你修改了主程序，会起效的）</p>
<h2 id="There-are-several-ways-to-work-around-this-issue"><a href="#There-are-several-ways-to-work-around-this-issue" class="headerlink" title="There are several ways to work around this issue."></a>There are several ways to work around this issue.</h2><ol>
<li><p>The simplest and most certain is to restart the ipython kernel after changing an imported module. But this has downsides as well, notably losing the data which exists in your ipython namespace and in any other imported modules.<br>最简单和确定可行的方法就是重启内核，但这个方法有弊端，尤其是你会丢失已经在你命名空间里的数据和其他已导入模块的数据</p>
</li>
<li><p>For simple cases, you can use python’s reload function. (This function is builtin in Python 2. Starting with Python 3.4, it is imported from standard module “importlib”). In many cases, this suffices after editing a module. It is described briefly <a href="https://stackoverflow.com/questions/1254370/reimport-a-module-in-python-while-interactive" target="_blank" rel="external">in this discussion on Stack Overflow</a> and elsewhere online in more detail.<br>在简单的案例中，使用 reload 功能，在Python2这是个内建函数，从Python3.4开始，这一功能需从模块importlib中导入； 在许多案例中，这一方法在模块修改后能够满足需求，这在StackOverflow中有更多的细节讨论</p>
<p> import importlib<br> importlib.reload(some_module)</p>
</li>
<li><p>For more complex cases, where reloading the module that you have edited also requires that its dependent/imported modules be reloaded (e.g. because they must be initialized as part of your edited module’s initialization), ipython’s autoreload extension  can be useful. See <a href="http://ipython.readthedocs.io/en/stable/config/extensions/autoreload.html" target="_blank" rel="external">autoreload</a> including the important caveats at the bottom of the page.<br>在更复杂的案例中，重载你修改过的模块需要这一模块依赖的、导入的模块也被重载，IPython某些自动重载的插件会很有帮助</p>
</li>
</ol>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-01-07</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"> <a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"> <a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"> <a href="http://twitter.com/home?status=,http://yoursite.com/2018/01/07/Jupyter - Ipython：编写一个模块后，修改不起作用，除非重启内核/,Echo,,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2017/08/20/0807-0820-Review/" title="0807-0820 WorkReview" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>